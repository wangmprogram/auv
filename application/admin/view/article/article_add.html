 {include file="public/head" title="新增文章 - 文章管理"}
<body>
<article class="page-container">
	<form class="form form-horizontal" id="form-article-add">
		<div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>文章标题：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <input type="text" style="width:250px;height:35px" class="input-text" value="" placeholder="" id="title" name="title">
	        </div>
	    </div>
		<div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>作者：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <input type="text" style="width:250px;height:35px" class="input-text" value="" placeholder="" id="author" name="author">
	        </div>
	    </div>
	    <div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3">作者邮箱：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <input type="text" style="width:250px;height:35px" class="input-text" value="" placeholder="" id="author_email" name="author_email">
	        </div>
	    </div>
		<div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>所属分类：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <span class="select-box" style="width:110px;">
	                <select class="select" style="width:100px;" name="cat_id" size="1">
	                    <option value="" selected>选择分类</option>
	                    {foreach $cats as $cat}
	                    <option value="{$cat.cat_id}">{$cat.cat_name}</option>
	                    {/foreach}
	                </select>
	            </span>
	        </div>
	    </div>
		<div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3">seo关键字：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <input type="text" style="width:250px;height:35px" class="input-text" value="" placeholder="" id="keywords" name="keywords">
	        </div>
	    </div>
	    <div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3">链接：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <input type="text" style="width:250px;height:35px" class="input-text" value="" placeholder="" id="link" name="link">
	        </div>
	    </div>
	    <div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>发布时间：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="text" style="width:250px;height:35px" onfocus="WdatePicker()" id="add_time" name="add_time" class="input-text Wdate">
			</div>
		</div>
	    <div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3">显示：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <input id="target1" name="is_open" value="1" type="radio" checked="checked">是
	            <input id="target0" name="is_open" value="0" type="radio">否
	        </div>
	    </div>
	    <div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3">是否新窗口打开：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <input id="target1" name="open_type" value="1" type="radio" checked="checked">是
	            <input id="target0" name="open_type" value="0" type="radio">否
	        </div>
	    </div>
	    <div class="row cl">
	        <label class="form-label col-xs-4 col-sm-3">网页描述：</label>
	        <div class="formControls col-xs-8 col-sm-9">
	            <textarea class="input-text" style="width:250px;height:35px" placeholder="" name="description" id="description"></textarea>
	        </div>
	    </div>
	    <div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>文章内容：</label>
			<div class="formControls col-xs-8 col-sm-9"> 
				<textarea class="span12 ckeditor" id="editor" name="content" title="">
            	</textarea>
			</div>
		</div>
		<div class="row cl">
	        <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
	            <input class="btn btn-primary radius" type="submit" value="&nbsp;&nbsp;提交&nbsp;&nbsp;">
	        </div>
	    </div>
	</form>
</article>

<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="__STATIC__/admin/lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="__STATIC__/admin/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="__STATIC__/admin/static/h-ui/js/H-ui.min.js"></script> 
<script type="text/javascript" src="__STATIC__/admin/static/h-ui.admin/js/H-ui.admin.js"></script> <!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="__STATIC__/admin/lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="__STATIC__/admin/lib/jquery.validation/1.14.0/jquery.validate.js"></script> 
<script type="text/javascript" src="__STATIC__/admin/lib/jquery.validation/1.14.0/validate-methods.js"></script> 
<script type="text/javascript" src="__STATIC__/admin/lib/jquery.validation/1.14.0/messages_zh.js"></script>
<script type="text/javascript" src="__STATIC__/admin/lib/webuploader/0.1.5/webuploader.min.js"></script> 
<script type="text/javascript" src="__STATIC__/admin/lib/ueditor/1.4.3/ueditor.config.js"></script> 
<script type="text/javascript" src="__STATIC__/admin/lib/ueditor/1.4.3/ueditor.all.min.js"> </script> 
<script type="text/javascript" src="__STATIC__/admin/lib/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script>

<script type="text/javascript">
    $(function(){
        $('.skin-minimal input').iCheck({
            checkboxClass: 'icheckbox-blue',
            radioClass: 'iradio-blue',
            increaseArea: '20%'
        });
        $("#form-article-add").validate({
            rules:{
                title:{
                    required:true,
                    maxlength:15
                },
                author:{
                    required:true,
                    maxlength:15
                },
                author_email:{
                    email:true
                },
                keywords:{
                	maxlength:8
                },
                link:{
                	url:true
                },
                description:{
                	maxlength:50
                },
                cat_id:{
                	required:true
                },
                add_time:{
                	required:true
                },
            },
            onkeyup:false,
            focusCleanup:true,
            success:"valid",
            submitHandler:function(form){
                $(form).ajaxSubmit({
                    type: 'post',
                    url: "{:url('Article/articleAdd')}",
                    success: function(data){
                        if(data.status==1){
                            layer.msg(data.msg,{icon:1,time:1000},function(){
                            var index = parent.layer.getFrameIndex(window.name);
                            parent.$('.btn-refresh').click();
								window.location.href = "{:url('Article/articleList')}";
                            });
                        }else{
                            layer.msg(data.msg,{icon:1,time:1500});
                        }   
                    },
                    error: function(XmlHttpRequest, textStatus, errorThrown){
                        layer.msg('error!',{icon:1,time:1000});
                    }
                });
            }
        });
       	var ue = UE.getEditor('editor',{
        //serverUrl :url,
        zIndex: 999,
        initialFrameWidth: "80%", //初化宽度
        initialFrameHeight: 300, //初化高度            
        focus: false, //初始化时，是否让编辑器获得焦点true或false
        maximumWords: 99999, removeFormatAttributes: 'class,style,lang,width,height,align,hspace,valign',//允许的最大字符数 'fullscreen',
        pasteplain:false, //是否默认为纯文本粘贴。false为不使用纯文本粘贴，true为使用纯文本粘贴
        autoHeightEnabled: true
    });
    });
</script>
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>